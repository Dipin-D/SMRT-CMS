
<h2>Manage Quizzes for {{ class_shell.course_name }}</h2>

<!-- Button to Create New Quiz -->
<div class="mb-3">
    <a href="{% url 'instructor:create_quiz' class_shell_id=class_shell.id %}" class="btn btn-success">Create New Quiz</a>
</div>

<ul class="list-group">
    {% for quiz in quizzes %}
        <li class="list-group-item">
            <strong>{{ quiz.title }}</strong>

            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <form method="post" style="display: inline;">
                        {% csrf_token %}
                        <input type="hidden" name="quiz_id" value="{{ quiz.id }}">
                        
                        <div class="form-group" id="edit-form-{{ quiz.id }}" style="display: none;">
                            <input type="text" name="title" class="form-control" value="{{ quiz.title }}" placeholder="Edit Quiz Title">
                            <button type="submit" name="edit_quiz" class="btn btn-primary btn-sm mt-2">Save</button>
                        </div>

                        <button type="button" class="btn btn-warning btn-sm" onclick="toggleEditForm('{{ quiz.id }}')">Edit</button>
                        <button type="submit" name="delete_quiz" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this quiz?');">Delete</button>
                    </form>
                </div>
                
                <a href="{% url 'instructor:go_to_quiz' class_shell_id=class_shell.id quiz_id=quiz.id %}" class="btn btn-info btn-sm">Go to Quiz</a>
            </div>
        </li>
    {% empty %}
        <li class="list-group-item">No quizzes available.</li>
    {% endfor %}
</ul>

<script>
    function toggleEditForm(quizId) {
        const editForm = document.getElementById(`edit-form-${quizId}`);
        if (editForm.style.display === "none") {
            editForm.style.display = "block";
        } else {
            editForm.style.display = "none";
        }
    }

    // Initialize: Hide all edit forms by default
    document.addEventListener('DOMContentLoaded', function() {
        const editForms = document.querySelectorAll('[id^="edit-form-"]');
        editForms.forEach(form => {
            form.style.display = 'none';
        });
    });
</script>

<div class="mt-3"></div>
    <a href="{% url 'instructor:go_to_course' class_shell.id %}" class="btn btn-secondary">Go back to Content Management</a>
</div>


